.PHONY: all clean
.DEFAULT: all

USE_OCAMLFIND = true

OCAMLPACKS[] =
	batteries
	pgocaml
	pgocaml.syntax
	cryptokit
	yojson
	config-file
	netstring

OCAMLINCLUDES += ../lib

OCAMLFINDFLAGS += -syntax camlp4o

COMMONS[] =
	../lib/config
	model
	bibman

SCRIPTS[] =
	add
	remove
	catalog
	edit
	lending
	my
	search_book
	user
	tex

include DB_config

DEPENDS[] =

foreach(filename => ..., $(SCRIPTS))
	DEPENDS += $(OCamlProgram $(filename), $(COMMONS) $(filename))
	export DEPENDS

all: $(DEPENDS)

clean:
	Clean()
	rm -f $(SCRIPTS)
